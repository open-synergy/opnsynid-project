<?xml version="1.0" encoding="utf-8" ?>
<!-- Copyright 2022 OpenSynergy Indonesia
     Copyright 2022 PT. Simetri Sinergi Indonesia
     License LGPL-3.0 or later (http://www.gnu.org/licenses/lgpl). -->
<odoo>
<record id="project_task_view_kanban" model="ir.ui.view">
     <field name="name">project.task kanban</field>
     <field name="model">project.task</field>
     <field name="inherit_id" ref="project.view_task_kanban" />
     <field name="priority" eval="10" />
     <field name="arch" type="xml">
          <data>
               <xpath expr="//field[@name='kanban_state']" position="before">
                    <field name="dependency_state" widget="state_selection" />
               </xpath>
          </data>
     </field>
</record>
<record id="project_task_view_form" model="ir.ui.view">
     <field name="name">project.task form</field>
     <field name="model">project.task</field>
     <field name="inherit_id" ref="project.view_task_form2" />
     <field name="mode">extension</field>
     <field name="priority" eval="10" />
     <field name="arch" type="xml">
          <data>
               <xpath expr="//field[@name='project_id']" position="after">
                    <xpath expr="//field[@name='partner_id']" position="move" />
               </xpath>
               <xpath expr="//field[@name='active']" position="after">
                    <separator string="Time Constrains" colspan="2" />
                    <xpath expr="//field[@name='date_deadline']" position="move" />
                    <separator string="Assignment" colspan="2" />
                    <xpath expr="//field[@name='user_id']" position="move" />
               </xpath>
               <xpath expr="//notebook" position="inside">
                    <page name="dependency" string="Dependency">
                         <group name="dependency1" colspan="4" col="2">
                              <field name="dependency_state" widget="state_selection" />
                         </group>
                         <field name="predecessor_ids">
                              <tree editable="top">
                                   <field name="project_id" />
                                   <field
                                    name="predecessor_task_id"
                                    domain="[('project_id','=',project_id)]"
                                />
                                   <field name="dependency_type" />
                                   <field name="predecessor_task_stage_id" />
                              </tree>
                         </field>
                    </page>
               </xpath>
          </data>
     </field>
</record>

<record id="project_task_view_search" model="ir.ui.view">
    <field name="name">project.task search</field>
    <field name="model">project.task</field>
    <field name="inherit_id" ref="project.view_task_search_form" />
    <field name="arch" type="xml">
        <xpath expr="//group" position="before">
            <filter
                    name="blocked"
                    string="Blocked By Dependency"
                    domain="[('dependency_state','=','blocked')]"
                />
            <filter
                    name="not_blocked"
                    string="Not Blocked By Dependency"
                    domain="[('dependency_state','!=','blocked')]"
                />
        </xpath>
    </field>
</record>


<menuitem
        name="Tasks"
        id="project.menu_project_management"
        parent="project.menu_main_pm"
        action="project.action_view_all_task"
        sequence="2"
        groups="task_viewer_group"
    />
</odoo>
